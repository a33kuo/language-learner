<!DOCTYPE html>
<html>
	<head>

	<meta charset=UTF-8>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.css" />
	<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js"></script>
	<script type="text/javascript" src="lib/jquery.wordcloud.js"></script>

	</head>

<body>

<canvas width="300" height="350" id="myCanvas" style="border:1px solid #c3c3c3;">
  <p>Anything in here will be replaced on browsers that support the canvas element</p>
</canvas>

<script type="text/javascript">
$(document).ready(function() {
	var $r = $('#myCanvas');
	$r.wordCloud({wordList: list_chinese, rotateRatio: 0, wordColor: 'language-learning'});
	$("#myCanvas").click(function(e){
	    var x = Math.floor((e.pageX-$r.offset().left));
    	var y = Math.floor((e.pageY-$r.offset().top));
		for(var i = 0; i < list_chinese.length; ++i) {
			var position = sessionStorage[list_chinese[i][0]].split(",");
			if (x<position[2] && x>position[0]) {
				if (y<position[3] && y>position[1]) {
					alert(list_chinese[i][0]);
					list_chinese[i][1] -= 3;
					$r.wordCloud({wordList: list_chinese, rotateRatio: 0, wordColor: 'language-learning'});
					break;
				}
			}
		}
	});
});
	var list_chinese = [["咖啡",58, 0, 1],
		["果汁",57, 0, 0.8],
		["現金",48, 1, 0.9],
		["謝謝",41, 3, 0.7],
		["糖",28, 2, 0.5],
		["牛奶",22, 0, 0.8],
		["服務生",32, 3, 1],
		["椅子",35, 4, 0.4]];
</script>

    <form action="upload.html" method="get">
      <div>
        <input type="text" id="lat_field" name="latitude" />
        <input type="text" id="long_field" name="longitude" />
      </div>
      <script>
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            $("#lat_field").val(pos.coords.latitude);
            $("#long_field").val(pos.coords.longitude);
          }
        );
      </script>
      <div>
        <input type="submit" value="Update Location" />
      </div>
    </form>

</body>
</html>
